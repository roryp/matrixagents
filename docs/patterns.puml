@startuml patterns
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 12
skinparam packageStyle rectangle

title LangChain4j Agentic Patterns

' ==== WORKFLOW PATTERNS ====

package "Workflow Patterns (Deterministic)" {
    
    package "1. Sequential (Chain)" #LightBlue {
        rectangle "Creative\nWriter" as seq1
        rectangle "Audience\nEditor" as seq2
        rectangle "Style\nEditor" as seq3
        seq1 --> seq2
        seq2 --> seq3
    }
    
    package "2. Parallel (Fan-out)" #LightGreen {
        rectangle "Input" as par_in
        rectangle "Food\nExpert" as par1
        rectangle "Movie\nExpert" as par2
        rectangle "Evening\nPlans" as par_out
        par_in --> par1
        par_in --> par2
        par1 --> par_out
        par2 --> par_out
    }
    
    package "3. Loop (Cycle)" #LightYellow {
        rectangle "Creative\nWriter" as loop1
        rectangle "Style\nScorer" as loop2
        rectangle "Style\nEditor" as loop3
        loop1 --> loop2 : generate
        loop2 --> loop3 : score < 0.8
        loop3 --> loop2 : refine
        loop2 -[#green]-> loop1 : score >= 0.8\n(exit)
    }
    
    package "4. Conditional (Branch)" #LightCoral {
        rectangle "Category\nRouter" as cond_r
        rectangle "Medical\nExpert" as cond1
        rectangle "Legal\nExpert" as cond2
        rectangle "Technical\nExpert" as cond3
        cond_r --> cond1 : MEDICAL
        cond_r --> cond2 : LEGAL
        cond_r --> cond3 : TECHNICAL
    }
}

' ==== AGENTIC PATTERNS ====

package "Agentic Patterns (LLM-Driven)" {
    
    package "5. Supervisor (Star)" #Thistle {
        rectangle "Bank\nSupervisor" as sup
        rectangle "Withdraw\nTool" as sup1
        rectangle "Credit\nTool" as sup2
        rectangle "Exchange\nTool" as sup3
        sup --> sup1
        sup --> sup2
        sup --> sup3
    }
    
    package "6. Human-in-Loop (Gated)" #PeachPuff {
        rectangle "Zodiac\nExtractor" as hil1
        rectangle "Human\nInput" as hil_h
        rectangle "Horoscope\nAgent" as hil2
        hil1 --> hil_h : need sign
        hil_h --> hil2 : provide sign
    }
}

' ==== PLANNING PATTERNS ====

package "Planning Patterns (Custom Planners)" {
    
    package "7. GOAP (DAG)" #Plum {
        rectangle "Sign\nExtractor" as goap1
        rectangle "Horoscope\nGenerator" as goap2
        rectangle "Story\nFinder" as goap3
        rectangle "Writer\nAgent" as goap4
        goap1 --> goap2
        goap1 --> goap3
        goap2 --> goap4
        goap3 --> goap4
    }
    
    package "8. P2P (Mesh)" #PaleTurquoise {
        rectangle "Literature\nAgent" as p2p1
        rectangle "Hypothesis\nAgent" as p2p2
        rectangle "Critic\nAgent" as p2p3
        rectangle "Validation\nAgent" as p2p4
        rectangle "Scorer\nAgent" as p2p5
        p2p1 --> p2p2
        p2p2 --> p2p3
        p2p3 --> p2p4
        p2p4 --> p2p2 : reformulate
        p2p4 --> p2p5 : validated
        p2p5 --> p2p2 : score < 0.75
    }
}

@enduml
